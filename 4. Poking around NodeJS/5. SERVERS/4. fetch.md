# SENDING REQUEST WITH `fetch`

## CREATING A `js` FOLDER

IF YOU DIDN'T CREATE THIS FOLDER EARLIER, DO IT RIGHT NOW; **SINCE WE HAVE ROUTING RULES THAT WE NEED TO SERVE FILES FROM THIS FOLDER** 

```
mkdir web_server/web_files/js
```

## DEFINING A BUTTON

FOR START WE ARE GOING TO DEFINE ONE BUTTON, AND ONE CONTAINER, WHICH WE'LL DO IN ONE OF OUR HTML FILES

WE ARE ALSO GOING TO LINK SCRIPT TAG WITH script**

```
code web_server/web_files/shiba.html
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shiba</title>
</head>
<body>
  <nav>
    <a href="/">Home</a>
    <a href="/shiba">Shiba</a>
  </nav>
  <div>Hello Shiba</div>
  <!-- I ADDED THIS -->
  <section>
    <!-- A BUTTON -->
    <button rel="js-button">Get All Records</button>
    <!-- AND ONE DIV -->
    <div rel="js-records"></div>
  </section>

  <!-- WE WILL ALSO LINK TO JAVASCRIPT FILE WE
  ARE GOING TO MAKE NEXT -->
  <script src="scripts/records.js" type="application/javascript"></script>
</body>
</html>
```

## LETS DEFINE JAVASCRIPT FILE I MENTIONED TO YOU

MENTIONING AGAIN THAT NEEDS TO BE IN A js FOLDER

```
touch web_server/js/records.js
```

```js
(function(){
  
  // LEETS JUST PRINT HELLO WORLD TO TEST THINGS OUT
  
  console.log("hello records")


})()
```

BEFORE WE TRY THINGS OUT I WANT TO MAKE ONE package.json SCRIPT TO, BECAUSE I NEED SHORTER THING TO RUN, TO BE MORE CONVENIEN

```
code package.json
```

```json
"start": "rm -rf web_server/my.db && ts-node web_server/index.ts",
```

LETS RESTART EVERYTHING AND RUN THE SCRIPT WITH yarn

```
yarn start
```

**NOW LETS GO TO <http://localhost:8066/shiba> AND CHECK THE CONSOLE**

YES, THE TEXT WE DEFINED IN THE JAVASCRIPT FILE IS NOW PRINTED IN THE CONSOLE

## LETS NOW DEFINE FUNCTION, WHERE WE ARE GOING TO USE `fetch` TO SEND NETWORK REQUEST

```
code web_server/web_files/js/records.js
```

**WE AE JUST GOING TO DEFINE FETCHING RECORDS FROM THE API ROUTE THAT CURRENTLY DOESN'T EXISTS; ITS PATH IS GOING TO BE `/records`; LATTER ON WE ARE GOING TO HANDLE MENTIONED ROUTE**

WE ARE JUST DEFINING FUNCTION, WHICH WE ARE NOT GOING TO CALL JUST YET 

```js
(function(){
  
  // THIS IS OUR FUNCTION 
  async function fetchAllRecords (){
    
    try{

      const resp = await fetch("/records");

      const data = await resp.json()

      renderRecords(data)

    }catch(err){

      console.error(err.message)
        
    }
  }


  function renderRecords(data){
    // 
    // 
  }



})()
```

**RENDERING OF FETCHED RECORDS WE ARE GOING TO DEFINE AFTER WE DEFINE OUR API ROUTE**

## LETS ADD CODE TO OUR API TO HANDLE `/records`

```
code web_server/index.ts
```

```ts

```
